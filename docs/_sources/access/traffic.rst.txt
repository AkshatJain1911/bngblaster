.. _session-traffic:

Session Traffic
---------------

The BNG Blaster can autogenerate bidirectional unicast
session traffic for all addresses assigned to a session
(IPv4, IPv6 and IPv6PD). 

.. image:: ../images/bbl_session_traffic.png
    :alt: Session Traffic

This is a powerful tool to quickly verify that forwarding
is correctly set up and working. 

.. note::

    All traffic sent from a network or a10nsp interfaces function 
    is called downstream. All traffic sent from an access interface
    function is called upstream. 

Those autogenerated traffic streams are named
``session-ipv4``, ``session-ipv6`` and ``session-ipv6pd``.

.. image:: ../images/bbl_interactive_session.png
    :alt: BNG Blaster Interactive Session

Configuration
~~~~~~~~~~~~~

The following example shows how to enable session traffic. 

.. code-block:: json

    {
        "session-traffic": {
            "ipv4-pps": 1,
            "ipv6-pps": 1,
            "ipv6pd-pps": 1
        }
    }

.. include:: ../configuration/session_traffic.rst

This traffic is generated between the session and a network 
interface. In case of multiple network interfaces, the preferred
network interfaces can be selected using the ``network-interface`` 
option in the corresponding access configuration. 

Verification
~~~~~~~~~~~~

The final report includes detailed information 
for session traffic. 

.. code-block:: none 

    Session Traffic (Global):
    --------------------------------------------------------------
    Config:
        IPv4    PPS:           1
        IPv6    PPS:           1
        IPv6PD  PPS:           1
    Verified Traffic Flows: 6/6
        Downstream IPv4:          1
        Downstream IPv6:          1
        Downstream IPv6PD:        1
        Upstream IPv4:            1
        Upstream IPv6:            1
        Upstream IPv6PD:          1
    Violations (>1s): 0
        Downstream IPv4:          0
        Downstream IPv6:          0
        Downstream IPv6PD:        0
        Upstream IPv4:            0
        Upstream IPv6:            0
        Upstream IPv6PD:          0
    First Sequence Number Received:
        Downstream IPv4    MIN:      1 ( 1.00s) AVG:      1 ( 1.00s) MAX:      1 ( 1.00s)
        Downstream IPv6    MIN:      1 ( 1.00s) AVG:      1 ( 1.00s) MAX:      1 ( 1.00s)
        Downstream IPv6PD  MIN:      1 ( 1.00s) AVG:      1 ( 1.00s) MAX:      1 ( 1.00s)
        Upstream IPv4      MIN:      1 ( 1.00s) AVG:      1 ( 1.00s) MAX:      1 ( 1.00s)
        Upstream IPv6      MIN:      1 ( 1.00s) AVG:      1 ( 1.00s) MAX:      1 ( 1.00s)
        Upstream IPv6PD    MIN:      1 ( 1.00s) AVG:      1 ( 1.00s) MAX:      1 ( 1.00s)


The ``First Sequence Number Received`` is used to measure the forwarding 
convergence. The session traffic starts automatically as soon as the session
is established using the rate configured. All traffic flows in the BNG Blaster
start with the 64bit sequence number 1. Assuming the first sequence number 
received for a given flow is 5 and the configured rate is 1 PPS, this would 
mean that it took between 4 and 5 seconds until forwarding is working.